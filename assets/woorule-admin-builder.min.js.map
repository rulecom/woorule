{"version":3,"file":"woorule-admin-builder.min.js","names":["jQuery","document","ready","$","on","$link","this","$toggle","closest","find","$section","data","$field","$status","val","action","nonce","Woorule_Admin_Builder","section","field","status","addClass","ajax","url","ajax_url","dataType","type","success","response","removeClass","e","form","hasClass","preventDefault","async","parallel","fields","callback2","each","prop","promise","done","JSON","stringify","statuses","name","replace","err","results","submit"],"sources":["woorule-admin-builder.js"],"sourcesContent":["jQuery( document ).ready(\n\tfunction ( $ ) {\n\t\t// Toggle on/off.\n\t\t$( document ).on(\n\t\t\t'click',\n\t\t\t'.woorule-field-toggle-attribute',\n\t\t\tfunction() {\n\t\t\t\tvar $link = $( this ),\n\t\t\t\t$row      = $link.closest( 'tr' ),\n\t\t\t\t$toggle   = $link.find( '.woocommerce-input-toggle' ),\n\t\t\t\t$section  = $link.data( 'section' ),\n\t\t\t\t$field    = $link.data( 'field' ),\n\t\t\t\t$status   = $( '[name=\"' + $field + '_status\"]' );\n\n\t\t\t\tif ( $status.val() === '1' ) {\n\t\t\t\t\t$status.val( '0' );\n\t\t\t\t} else {\n\t\t\t\t\t$status.val( '1' );\n\t\t\t\t}\n\n\t\t\t\tvar data = {\n\t\t\t\t\taction: 'woorule_builder_field_enabled',\n\t\t\t\t\tnonce: Woorule_Admin_Builder.nonce,\n\t\t\t\t\tsection: $section,\n\t\t\t\t\tfield: $field,\n\t\t\t\t\tstatus: $status.val()\n\t\t\t\t};\n\n\t\t\t\t$toggle.addClass( 'woocommerce-input-toggle--loading' );\n\n\t\t\t\t$.ajax(\n\t\t\t\t\t{\n\t\t\t\t\t\turl:      Woorule_Admin_Builder.ajax_url,\n\t\t\t\t\t\tdata:     data,\n\t\t\t\t\t\tdataType : 'json',\n\t\t\t\t\t\ttype     : 'POST',\n\t\t\t\t\t\tsuccess:  function( response ) {\n\t\t\t\t\t\t\tif ( true === response.data ) {\n\t\t\t\t\t\t\t\t$toggle.removeClass( 'woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled' );\n\t\t\t\t\t\t\t\t$toggle.addClass( 'woocommerce-input-toggle--enabled' );\n\t\t\t\t\t\t\t\t$toggle.removeClass( 'woocommerce-input-toggle--loading' );\n\t\t\t\t\t\t\t} else if ( false === response.data ) {\n\t\t\t\t\t\t\t\t$toggle.removeClass( 'woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled' );\n\t\t\t\t\t\t\t\t$toggle.addClass( 'woocommerce-input-toggle--disabled' );\n\t\t\t\t\t\t\t\t$toggle.removeClass( 'woocommerce-input-toggle--loading' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\n\t\t$( document ).on(\n\t\t\t'click',\n\t\t\t'form.woorule #btn-submit',\n\t\t\tfunction( e) {\n\t\t\t\tvar form = $( this ).closest( 'form' );\n\n\t\t\t\tif ( form.hasClass( 'processing' ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\tasync.parallel(\n\t\t\t\t\t{\n\t\t\t\t\t\tfields: function( callback2 ) {\n\t\t\t\t\t\t\tvar fields = {};\n\t\t\t\t\t\t\t$( 'select.field_value', form ).each(\n\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\tfields[ $( this ).prop( 'name' ) ] = $( this ).val();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t).promise().done(\n\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t$( '[name=\"rule_order_fields\"]', form ).val( JSON.stringify( fields ) );\n\t\t\t\t\t\t\t\t\t$( '[name=\"rule_cart_fields\"]', form ).val( JSON.stringify( fields ) );\n\n\t\t\t\t\t\t\t\t\tcallback2( null, fields );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstatuses: function( callback2 ) {\n\t\t\t\t\t\t\tvar statuses = {};\n\t\t\t\t\t\t\t$( 'input.field_status', form ).each(\n\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\tvar name                                  = $( this ).prop( 'name' );\n\t\t\t\t\t\t\t\t\tstatuses[ name.replace( '_status', '' ) ] = $( this ).val();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t).promise().done(\n\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t$( '[name=\"rule_order_fields_status\"]', form ).val( JSON.stringify( statuses ) );\n\t\t\t\t\t\t\t\t\t$( '[name=\"rule_cart_fields_status\"]', form ).val( JSON.stringify( statuses ) );\n\n\t\t\t\t\t\t\t\t\tcallback2( null, statuses );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tfunction( err, results ) {\n\t\t\t\t\t\tform.addClass( 'processing' );\n\t\t\t\t\t\tform.submit();\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t);\n\t}\n);\n"],"mappings":"AAAAA,OAAQC,UAAWC,OAClB,SAAWC,GAEVA,EAAGF,UAAWG,GACb,QACA,mCACA,WACC,IAAIC,EAAQF,EAAGG,MAEfC,GADYF,EAAMG,QAAS,MACfH,EAAMI,KAAM,8BACxBC,EAAYL,EAAMM,KAAM,WACxBC,EAAYP,EAAMM,KAAM,SACxBE,EAAYV,EAAG,UAAYS,EAAS,aAEb,MAAlBC,EAAQC,MACZD,EAAQC,IAAK,KAEbD,EAAQC,IAAK,KAGd,IAAIH,EAAO,CACVI,OAAQ,gCACRC,MAAOC,sBAAsBD,MAC7BE,QAASR,EACTS,MAAOP,EACPQ,OAAQP,EAAQC,OAGjBP,EAAQc,SAAU,qCAElBlB,EAAEmB,KACD,CACCC,IAAUN,sBAAsBO,SAChCb,KAAUA,EACVc,SAAW,OACXC,KAAW,OACXC,QAAU,SAAUC,IACd,IAASA,EAASjB,MACtBJ,EAAQsB,YAAa,yEACrBtB,EAAQc,SAAU,qCAClBd,EAAQsB,YAAa,uCACV,IAAUD,EAASjB,OAC9BJ,EAAQsB,YAAa,yEACrBtB,EAAQc,SAAU,sCAClBd,EAAQsB,YAAa,4CAQ3B1B,EAAGF,UAAWG,GACb,QACA,4BACA,SAAU0B,GACT,IAAIC,EAAO5B,EAAGG,MAAOE,QAAS,QAE9B,QAAKuB,EAAKC,SAAU,gBAIpBF,EAAEG,iBAEFC,MAAMC,SACL,CACCC,OAAQ,SAAUC,GACjB,IAAID,EAAS,GACbjC,EAAG,qBAAsB4B,GAAOO,MAC/B,WACCF,EAAQjC,EAAGG,MAAOiC,KAAM,SAAapC,EAAGG,MAAOQ,SAE/C0B,UAAUC,MACX,WACCtC,EAAG,6BAA8B4B,GAAOjB,IAAK4B,KAAKC,UAAWP,IAC7DjC,EAAG,4BAA6B4B,GAAOjB,IAAK4B,KAAKC,UAAWP,IAE5DC,EAAW,KAAMD,OAIpBQ,SAAU,SAAUP,GACnB,IAAIO,EAAW,GACfzC,EAAG,qBAAsB4B,GAAOO,MAC/B,WACC,IAAIO,EAAwC1C,EAAGG,MAAOiC,KAAM,QAC5DK,EAAUC,EAAKC,QAAS,UAAW,KAAS3C,EAAGG,MAAOQ,SAEtD0B,UAAUC,MACX,WACCtC,EAAG,oCAAqC4B,GAAOjB,IAAK4B,KAAKC,UAAWC,IACpEzC,EAAG,mCAAoC4B,GAAOjB,IAAK4B,KAAKC,UAAWC,IAEnEP,EAAW,KAAMO,SAKrB,SAAUG,EAAKC,GACdjB,EAAKV,SAAU,cACfU,EAAKkB,aAIA"}